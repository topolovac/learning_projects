<!doctype html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Rate My Lick</title><script src=\"https://unpkg.com/htmx.org@2.0.3\"></script><style>\n\t\t\t\tbody {\n\t\t\t\t\tfont-family: Arial, sans-serif;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tmargin-top: 50px;\n\t\t\t\t}\n\n\t\t\t\t.main {\n\t\t\t\t\t    width: 100%;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t}\n\n\t\t\t\t.container {\n\t\t\t\t\tmargin-top: 25px;\n\t\t\t\t\twidth: 300px; \n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tgap: 15px;\n\t\t\t\t}\n    \t\t</style></head><body><div class=\"main\"><h1>Create Audio Sample</h1><form class=\"container\" hx-encoding=\"multipart/form-data\" hx-post=\"/publish-sample\"><input name=\"songname\" type=\"text\" placeholder=\"song name\" required> <textarea name=\"songdescription\" type=\"text\" placeholder=\"short description\" rows=\"3\"></textarea> <input id=\"audiosample\" name=\"audiosample\" type=\"file\" required> <button type=\"submit\">Publish Sample</button></form><div class=\"container\">Record Audio Sample <button id=\"startButton\">Start Recording</button> <button id=\"stopButton\" disabled>Stop Recording</button><h3>Recorded Audio:</h3><audio id=\"audioPlayback\" controls></audio></div></div></body><script>\n    let mediaRecorder;\n    let recordedChunks = [];\n\n    document.getElementById('startButton').addEventListener('click', async () => {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      mediaRecorder = new MediaRecorder(stream);\n\n      document.getElementById('startButton').disabled = true;\n      document.getElementById('stopButton').disabled = false;\n\n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) recordedChunks.push(event.data);\n      };\n\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(recordedChunks, { type: 'audio/webm' });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        document.getElementById('audioPlayback').src = audioUrl;\n\n        document.getElementById('startButton').disabled = false;\n        document.getElementById('stopButton').disabled = true;\n        recordedChunks = [];\n\n\n \t\tconst audioFile = new File([audioBlob], \"audioSample.webm\", { type: \"audio/webm\" });\n  \t\tconst dataTransfer = new DataTransfer();\n  \t\tdataTransfer.items.add(audioFile);\n\t\tconst sampleInput = document.getElementById(\"audiosample\");\n\t\tsampleInput.files = dataTransfer.files;\n      };\n\n      mediaRecorder.start();\n    });\n\n    document.getElementById('stopButton').addEventListener('click', () => {\n      mediaRecorder.stop();\n    });\n  </script></html>
